{"ast":null,"code":"import _regeneratorRuntime from\"/Users/gaoqiantong/Desktop/comp431/hw/final-frontend-Moongram/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/gaoqiantong/Desktop/comp431/hw/final-frontend-Moongram/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/gaoqiantong/Desktop/comp431/hw/final-frontend-Moongram/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var UserInfoGrid=function UserInfoGrid(_ref){var user=_ref.user,onUpdateStatus=_ref.onUpdateStatus;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),status=_useState2[0],setStatus=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),newStatus=_useState4[0],setNewStatus=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),avatarUrl=_useState6[0],setAvatarUrl=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),displayName=_useState8[0],setDisplayName=_useState8[1];var fetchHeadline=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(\"https://lily-social-app-7e0ca4e6d236.herokuapp.com/headline/\".concat(user.username),{withCredentials:true});case 3:response=_context.sent;setStatus(response.data.headline);_context.next=9;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);case 9:case\"end\":return _context.stop();}},_callee,null,[[0,7]]);}));return function fetchHeadline(){return _ref2.apply(this,arguments);};}();var fetchDisplayName=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var response;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return axios.get(\"https://lily-social-app-7e0ca4e6d236.herokuapp.com/displayname/\".concat(user.username),{withCredentials:true});case 3:response=_context2.sent;setDisplayName(response.data.displayname);_context2.next=9;break;case 7:_context2.prev=7;_context2.t0=_context2[\"catch\"](0);case 9:case\"end\":return _context2.stop();}},_callee2,null,[[0,7]]);}));return function fetchDisplayName(){return _ref3.apply(this,arguments);};}();var fetchAvatar=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(){var response;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return axios.get(\"https://lily-social-app-7e0ca4e6d236.herokuapp.com/avatar/\".concat(user.username),{withCredentials:true});case 3:response=_context3.sent;setAvatarUrl(response.data.avatar);_context3.next=9;break;case 7:_context3.prev=7;_context3.t0=_context3[\"catch\"](0);case 9:case\"end\":return _context3.stop();}},_callee3,null,[[0,7]]);}));return function fetchAvatar(){return _ref4.apply(this,arguments);};}();useEffect(function(){fetchHeadline();fetchAvatar();fetchDisplayName();},[user.username]);var handleStatusUpdate=function handleStatusUpdate(){if(newStatus.trim()!==''){onUpdateStatus(newStatus);setStatus(newStatus);setNewStatus('');axios.put(\"https://lily-social-app-7e0ca4e6d236.herokuapp.com/headline\",{headline:newStatus},{withCredentials:true}).then(function(_response){});}};return/*#__PURE__*/_jsxs(\"div\",{className:\"user-info-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{children:displayName}),/*#__PURE__*/_jsx(\"img\",{src:avatarUrl})]}),/*#__PURE__*/_jsx(\"p\",{className:\"status\",children:status}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newStatus,onChange:function onChange(e){return setNewStatus(e.target.value);},className:\"post-input\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleStatusUpdate,className:\"post-button\",children:\"Update Status\"})]})]});};export default UserInfoGrid;","map":{"version":3,"names":["React","useState","useEffect","axios","jsx","_jsx","jsxs","_jsxs","UserInfoGrid","_ref","user","onUpdateStatus","_useState","_useState2","_slicedToArray","status","setStatus","_useState3","_useState4","newStatus","setNewStatus","_useState5","_useState6","avatarUrl","setAvatarUrl","_useState7","_useState8","displayName","setDisplayName","fetchHeadline","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","wrap","_callee$","_context","prev","next","get","concat","username","withCredentials","sent","data","headline","t0","stop","apply","arguments","fetchDisplayName","_ref3","_callee2","_callee2$","_context2","displayname","fetchAvatar","_ref4","_callee3","_callee3$","_context3","avatar","handleStatusUpdate","trim","put","then","_response","className","children","src","type","value","onChange","e","target","onClick"],"sources":["/Users/gaoqiantong/Desktop/comp431/hw/final-frontend-Moongram/src/components/UserInfoGrid.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\n\nconst UserInfoGrid = ({ user, onUpdateStatus }) => {\n\n  const [status, setStatus] = useState(\"\");\n\n  const [newStatus, setNewStatus] = useState('');\n\n    const [avatarUrl, setAvatarUrl] = useState('');\n    const [displayName, setDisplayName] = useState('');\n\n  const fetchHeadline = async () => {\n    try {\n      const response = await axios.get(`https://lily-social-app-7e0ca4e6d236.herokuapp.com/headline/${user.username}`, { withCredentials: true });\n      setStatus(response.data.headline);\n    } catch (_error) {}\n  };\n\n  const fetchDisplayName = async () => {\n    try {\n      const response = await axios.get(`https://lily-social-app-7e0ca4e6d236.herokuapp.com/displayname/${user.username}`, { withCredentials: true });\n      setDisplayName(response.data.displayname);\n    } catch (_error) {}\n  }\n\n  const fetchAvatar = async () => {\n    try {\n      const response = await axios.get(`https://lily-social-app-7e0ca4e6d236.herokuapp.com/avatar/${user.username}`, { withCredentials: true });\n      setAvatarUrl(response.data.avatar);\n    } catch (_error) {}};\n\n  useEffect(() => {\n    fetchHeadline();\n    fetchAvatar();\n    fetchDisplayName();\n  }, [user.username]); \n\n  const handleStatusUpdate = () => {\n    if (newStatus.trim() !== '') {\n      onUpdateStatus(newStatus);\n      setStatus(newStatus);\n      setNewStatus('');\n      axios.put(`https://lily-social-app-7e0ca4e6d236.herokuapp.com/headline`, { headline: newStatus }, { withCredentials: true })\n      .then(_response => {})\n    }\n\n  };\n\n  return (\n    <div className=\"user-info-grid\">\n      <div>\n        <h3>{displayName}</h3>\n        <img src={avatarUrl}></img>\n      </div>\n      <p className=\"status\">{status}</p>\n      <div>\n        <input\n          type=\"text\"\n          value={newStatus}\n          onChange={(e) => setNewStatus(e.target.value)}\n          className=\"post-input\"\n        />\n        <button onClick={handleStatusUpdate} className=\"post-button\">\n          Update Status\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default UserInfoGrid;\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}