{"ast":null,"code":"import _slicedToArray from\"/Users/gaoqiantong/Desktop/comp431/hw/hw5-Moongram/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import userDataTest from'../users.json';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var LoginForm=function LoginForm(_ref){var navigate=_ref.navigate;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),username=_useState2[0],setUsername=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),errorMessage=_useState6[0],setErrorMessage=_useState6[1];var _useState7=useState(userDataTest),_useState8=_slicedToArray(_useState7,2),users=_useState8[0],setUsers=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),isLoggedIn=_useState10[0],setIsLoggedIn=_useState10[1];var fetchUserData=function fetchUserData(){fetch(\"https://jsonplaceholder.typicode.com/users\").then(function(response){return response.json();}).then(function(data){setUsers(data);});};useEffect(function(){fetchUserData();},[]);var validate=function validate(event){if(users.length===0){setUsers(userDataTest);}event.preventDefault();setErrorMessage('');var userExists=false;var passwordConfirm=false;var userData;for(var i=0;i<users.length;i++){if(users[i].username===username){userExists=true;if(users[i].address.street===password){passwordConfirm=true;userData=users[i];}break;}}if(userExists&&passwordConfirm){setIsLoggedIn(true);// Set isLoggedIn to true if login is successful\nnavigate('/main',{state:{userData:userData}});}else{setIsLoggedIn(false);// Set isLoggedIn to false if login fails\nsetErrorMessage('Invalid username or password!');}};return/*#__PURE__*/_jsxs(\"div\",{className:\"login-form\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"User Login Form\"}),/*#__PURE__*/_jsxs(\"form\",{id:\"login\",\"data-testid\":\"login-form-1\",onSubmit:validate,children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"Username: \",/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"account\",\"data-testid\":\"Username\",required:true,onChange:function onChange(e){return setUsername(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Password: \",/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"password\",\"data-testid\":\"Password\",required:true,onChange:function onChange(e){return setPassword(e.target.value);}})]}),/*#__PURE__*/_jsx(\"div\",{className:\"button-container\",children:/*#__PURE__*/_jsx(\"input\",{type:\"submit\",value:\"Login\",\"data-testid\":\"login-button\"})})]}),errorMessage&&/*#__PURE__*/_jsx(\"p\",{style:{color:'red'},children:errorMessage}),isLoggedIn&&/*#__PURE__*/_jsx(\"p\",{children:\"Welcome, User!\"})]});};export default LoginForm;","map":{"version":3,"names":["React","useState","useEffect","userDataTest","jsx","_jsx","jsxs","_jsxs","LoginForm","_ref","navigate","_useState","_useState2","_slicedToArray","username","setUsername","_useState3","_useState4","password","setPassword","_useState5","_useState6","errorMessage","setErrorMessage","_useState7","_useState8","users","setUsers","_useState9","_useState10","isLoggedIn","setIsLoggedIn","fetchUserData","fetch","then","response","json","data","validate","event","length","preventDefault","userExists","passwordConfirm","userData","i","address","street","state","className","children","id","onSubmit","type","name","required","onChange","e","target","value","style","color"],"sources":["/Users/gaoqiantong/Desktop/comp431/hw/hw5-Moongram/src/components/LoginForm.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport userDataTest from '../users.json'\n\nconst LoginForm = ({ navigate }) => {\n  const [username, setUsername] = useState('');\n  const [password, setPassword] = useState('');\n  const [errorMessage, setErrorMessage] = useState('');\n  const [users, setUsers] = useState(userDataTest);\n  const [isLoggedIn, setIsLoggedIn] = useState(false); \n  const fetchUserData = () => {\n    fetch(\"https://jsonplaceholder.typicode.com/users\")\n      .then(response => response.json())\n      .then(data => {\n        setUsers(data);\n      });\n  };\n\n  useEffect(() => {\n    fetchUserData();\n  }, []);\n \n\n  const validate = (event) => {\n    if (users.length === 0) {\n      setUsers(userDataTest)\n    }\n    event.preventDefault();\n    setErrorMessage('');\n\n    let userExists = false;\n    let passwordConfirm = false;\n    let userData;\n    for (let i = 0; i < users.length; i++) {\n\n      if (users[i].username === username) {\n        userExists = true;\n        if (users[i].address.street === password) {\n          passwordConfirm = true;\n          userData = users[i];\n        }\n        break;\n      }\n    }\n\n    if (userExists && passwordConfirm) {\n      setIsLoggedIn(true); // Set isLoggedIn to true if login is successful\n      navigate('/main', { state: { userData: userData } });\n    } else {\n      setIsLoggedIn(false); // Set isLoggedIn to false if login fails\n      setErrorMessage('Invalid username or password!');\n    }\n  };\n\n  return (\n    <div className=\"login-form\" >\n      <h2>User Login Form</h2>\n      <form id=\"login\" data-testid=\"login-form-1\" onSubmit={validate}>\n        <p>Username: <input type=\"text\" name=\"account\" data-testid=\"Username\" required onChange={(e) => setUsername(e.target.value)} /></p>\n        <p>Password: <input type=\"password\" name=\"password\" data-testid=\"Password\" required onChange={(e) => setPassword(e.target.value)} /></p>\n        <div className=\"button-container\">\n          <input type=\"submit\" value=\"Login\" data-testid=\"login-button\"/>\n        </div>\n      </form>\n      {errorMessage && <p style={{ color: 'red' }}>{errorMessage}</p>}\n      {isLoggedIn && <p>Welcome, User!</p>}\n    </div>\n  );\n};\n\nexport default LoginForm;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}